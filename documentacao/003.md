# Benchmarküí™üèæ
Testes de carga para os servidores
## Especifica√ß√µesü§ì
Bem, quero apenas salientar que eu n√£o tenho boas m√©tricas para decidir a carga de testes. O que seria um teste de carga alta? Quantas conex√µes? Quantas requisi√ß√µes? Quanto tempo? Ent√£o tirei as coisas da minha cabe√ßa
mesmo. "Ah, mas esse teste leve est√° muito pesado", "Esse teste pesado est√° muito leve.". Eu realmente n√£o sei, fique a vontade para me corrigir, me xingar ou algo assim.
### Configura√ß√µes:
* Conex√µes (-c): N√∫mero de conex√µes simult√¢neas que o autocannon abrir√° contra o servidor.
* Dura√ß√£o (-d): Tempo de dura√ß√£o dos testes em segundos.
* Pipelining (-p): Uma conex√£o pode enviar v√°rias requisi√ß√µes em sequ√™ncia sem aguardar a resposta da anterior.
* M√©todo (-m): M√©todo http usado na requisi√ß√£o (Padr√£o √© GET).
### M√©tricas:
* Lat√™ncia: Quanto menor a lat√™ncia, melhor. Significa que o servidor demora menos para responder √†s requisi√ß√µes.
* Req/Sec: Indica quantas requisi√ß√µes, em m√©dia, o servidor conseguiu lidar por segundo. Quanto maior, melhor.
* Bytes/Sec: Volume de dados que o servidor conseguiu entregar a cada segundo.
* Erros e timeouts:
  - Erros: N√∫meros de requsi√ß√µes que retornaram algum erro.
  - Timeouts: N√∫meros de requisi√ß√µes que n√£o receberam resposta dentro do tempo limite
* Totais:
  - Total requests: Quantidade total de requisi√ß√µes enviadas durante o teste.
  - Total read: Quantidade total de dados recebidos do servidor (Em bytes).
  - Total written: Quantidade total de dados enviados para o servidor.
### Stats:
* 1%, 2.5%, 50%, 97.5%, 99% : Distribui√ß√£o estat√≠stica de m√©tricas em cada percentil.
  - Ex: Se no campo lat√™ncia, caso 50% (mediana) est√° 100ms, isso significa que metade das requisi√ß√µes foram atendidas em at√© 100ms.
* Avg: ${M√©trica} m√©dia, em ms.
* Stdev (desvio padr√£o): Indica quanto os valores de uma m√©trica variam em rela√ß√£o √† m√©dia.
  - Stdev baixo: menor varia√ß√£o entre os resultados, indicando que s√£o mais consistentes.
  - Stdev alto: valores mais dispersos, indicando uma maior varia√ß√£o entre os resultados.  
* Min e max: Valor m√≠nimo e valor m√°ximo de ${M√©trica} observados por segundo.

## Aviso‚ö†Ô∏è
N√£o irei testar todas as rotas dos servidores pois h√° muitas com o mesmo tipo de conte√∫do, o que torna testar todas desnecess√°rio.
* Usarei as stats Avg para termos de compara√ß√£o, assim como n√∫mero total de requisi√ß√µes e erros.
* O primeiro quadro √© sempre o do servidor bun, enquanto o segundo √© do node (cima e baixo).

## Testes de cargaüî®
Come√ßando as brincadeiras

### Testes de carga leveü™∂
Usarei as configura√ß√µes default do autocannon
* N√∫mero de conex√µes: 10
* Dura√ß√£o do teste: 10 segundos
* N√∫mero de pipelines: 1
#### Rota: '/'
* Bun:
![Captura de tela 2025-03-17 010941](https://github.com/user-attachments/assets/44e2ffa5-59e7-414d-bc09-6f05c72d7b56)
* Node:
![Captura de tela 2025-03-17 110901](https://github.com/user-attachments/assets/ec46fdbc-d2de-4fad-8f2e-720a98bcfa89)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Bun
- Bun: 6 x Node: 0

#### Rota: '/citi'
* Bun:
![Captura de tela 2025-03-17 011059](https://github.com/user-attachments/assets/277a2b4a-1c71-4d05-9863-ee2a45eff72d)
* Node:
![Captura de tela 2025-03-17 110944](https://github.com/user-attachments/assets/27b8454c-78c4-4a44-adf1-024208f1dd85)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun (0.17ms de diferen√ßa)
* Req/Sec avg: Bun (79.2 de diferen√ßa)
* Bytes/sec: Bun (1.4MB de diferen√ßa)
* Total de requisi√ß√µes: Bun (1k de diferen√ßa)
* Total de dados lidos: Bun (14MB de diferen√ßa)
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Bun

- Bun: 6 x Node: 0 (Baixa diferen√ßa)

#### Rota: '/citi/lab-inovacao'
* Bun:
![Captura de tela 2025-03-17 011927](https://github.com/user-attachments/assets/da44a6a0-be27-4618-822c-c1bc35baa568)
* Node:
![Captura de tela 2025-03-17 111116](https://github.com/user-attachments/assets/bee162b8-1636-414f-9f83-9ef422a37f22)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Node

- Bun: 5 x Node: 1

#### Rota: '/citi/skylines'
* Bun:
![Captura de tela 2025-03-17 012153](https://github.com/user-attachments/assets/0d2bb183-ab81-45c3-9373-eb29390ea3ec)
* Node:
![Captura de tela 2025-03-17 111214](https://github.com/user-attachments/assets/8f8c5d07-c816-4c19-8e73-37350f9df77a)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Bun

- Bun: 6 x Node: 0

### Testes de carga m√©dia‚öñÔ∏è
* N√∫mero de conex√µes: 70
* Dura√ß√£o do teste: 30 segundos
* N√∫mero de pipelines: 3

#### Rota: '/'
* Bun:
![Captura de tela 2025-03-17 012621](https://github.com/user-attachments/assets/4758ad73-1cc5-4685-9942-c3fce8210a7c)
* Node:
![Captura de tela 2025-03-17 111352](https://github.com/user-attachments/assets/9dcf14a2-940c-47bb-a751-5d88d90c3d13)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Node

- Bun: 5 x Node: 1

#### Rota: '/citi'
* Bun:
![Captura de tela 2025-03-17 012724](https://github.com/user-attachments/assets/ea3d7ced-cf0a-4c41-aca9-7abbc6442a99)
* Node:
![Captura de tela 2025-03-17 111540](https://github.com/user-attachments/assets/ea430988-890b-4af7-8e36-cbe61daa9e2a)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun (1.26ms de diferen√ßa)
* Req/Sec avg: Bun (+-13 de diferen√ßa)
* Bytes/sec: Bun (0.3MB de diferen√ßa)
* Total de requisi√ß√µes: Nenhum
* Total de dados lidos: Bun (10MB de diferen√ßa)
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Node

- Bun: 4 x Node: 1 (Baixa diferen√ßa)

#### Rota: '/citi/lab-inovacao'
* Bun:
![Captura de tela 2025-03-17 014526](https://github.com/user-attachments/assets/10c020f0-129e-4883-9960-f1c52642bf1d)
* Node:
![Captura de tela 2025-03-17 111656](https://github.com/user-attachments/assets/1f296da0-5c68-4e5c-9781-74e1ab7bc971)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Bun

- Bun: 6 x Node: 0

#### Rota: '/citi/skylines'
* Bun:
![Captura de tela 2025-03-17 015136](https://github.com/user-attachments/assets/f26d870d-38aa-4842-91ec-bca5c902739d)
* Node:
![Captura de tela 2025-03-17 112017](https://github.com/user-attachments/assets/641e5da8-64b4-437c-93bc-b3b6322b86b9)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun (+-7 de diferen√ßa)
* Bytes/sec: Bun (5MB de diferen√ßa)
* Total de requisi√ß√µes: Nenhum.
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Bun

- Bun: 5 x Node: 0

### Testes de carga altaüèãüèΩ
* N√∫mero de conex√µes: 400
* Dura√ß√£o do teste: 2 minutos
* N√∫mero de pipelines: 12

#### Rota: '/'
* Bun:
![Captura de tela 2025-03-17 015622](https://github.com/user-attachments/assets/a99c98ca-ac0c-4ab1-bf05-0656b295dfcb)
* Node:
![Captura de tela 2025-03-17 112731](https://github.com/user-attachments/assets/97f41048-3a4e-45d4-9dbc-43694b9c20a9)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Nenhum (zero erros).
* Menores varia√ß√µes de resultados: Node

- Bun: 5 x Node: 1

#### Rota: '/citi'
* Bun:
![Captura de tela 2025-03-17 020059](https://github.com/user-attachments/assets/4d29186f-7429-4385-9821-79036b3b278c)
* Node:
![Captura de tela 2025-03-17 113011](https://github.com/user-attachments/assets/58ceeb6a-6e0c-4ea3-b836-808139fc38fb)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Bun
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Bun
* Menos erros: Bun
* Menores varia√ß√µes de resultados: Bun

Bun: 7 x Node: 0

#### Rota: '/citi/lab-inovacao'
* Bun:
![Captura de tela 2025-03-17 020431](https://github.com/user-attachments/assets/7bfd516a-c1dc-4813-9509-4ca45ffbede7)
* Node:
![Captura de tela 2025-03-17 113356](https://github.com/user-attachments/assets/7bc69673-851a-4d0d-b2e9-6efa51b06364)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun
* Req/Sec avg: Bun
* Bytes/sec: Node
* Total de requisi√ß√µes: Bun
* Total de dados lidos: Node
* Menos erros: Bun
* Menores varia√ß√µes de resultados: Bun

Bun: 5 x Node: 2

#### Rota: '/citi/skylines'
* Bun:
![Captura de tela 2025-03-17 020943](https://github.com/user-attachments/assets/a746a550-be4c-4f4d-8591-03c04655bc4d)
* Node:
![Captura de tela 2025-03-17 113703](https://github.com/user-attachments/assets/423ba7ef-ccf3-4530-b6d0-a5d8a25e5e03)
##### Compara√ß√£o:
* Lat√™ncia avg: Bun (Node foi menor, mas n√£o estava lendo os dados)
* Req/Sec avg: Bun
* Bytes/sec: Node
* Total de requisi√ß√µes: Node
* Total de dados lidos: Bun
* Menos erros: Bun
* Menores varia√ß√µes de resultados: Bun (Node n√£o leu os dados)

Bun: 5 x Node: 2

## Considera√ß√µes finais‚ÄºÔ∏è
Como podemos ver, o servidor Bun saiu com resultados melhores em todas as vezes, mesmo que em alguns momentos a diferen√ßa tenha sido m√≠nima e, meus m√©todos, question√°veis. Com isso finalizo a documenta√ß√£o da task.


